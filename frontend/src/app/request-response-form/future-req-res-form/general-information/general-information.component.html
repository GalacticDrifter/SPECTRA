<mat-card class="general-info-card">
    <mat-card-header>
      <mat-card-title>1. General Information</mat-card-title>
    </mat-card-header>

    <mat-card-content>
      <form [formGroup]="generalInfoForm" class="form-grid">
        <!-- Left Column -->
        <div class="form-column">
          <!-- Program Title -->
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>a. Program Title</mat-label>
            <input matInput 
                   formControlName="programTitle"
                   placeholder="Enter program title">
            <mat-error *ngIf="generalInfoForm.get('programTitle')?.errors?.['required']">
              Program title is required
            </mat-error>
          </mat-form-field>

          <!-- Contracts POC -->
          <div class="contact-group" formGroupName="contractsPOC">
            <h3>b. Contracts POC</h3>
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Name</mat-label>
              <input matInput 
                     formControlName="name"
                     placeholder="Enter POC name">
              <mat-error *ngIf="generalInfoForm.get('contractsPOC.name')?.errors?.['required']">
                POC name is required
              </mat-error>
            </mat-form-field>

            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Code</mat-label>
              <input matInput 
                     formControlName="code"
                     placeholder="Enter POC code">
            </mat-form-field>

            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Telephone</mat-label>
              <input matInput 
                     formControlName="telephone"
                     placeholder="Enter POC telephone">
            </mat-form-field>
          </div>

          <!-- Contract Number -->
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>c. Contract No.</mat-label>
            <input matInput 
                   formControlName="contractNumber"
                   placeholder="Enter contract number">
            <mat-error *ngIf="generalInfoForm.get('contractNumber')?.errors?.['required']">
              Contract number is required
            </mat-error>
          </mat-form-field>
        </div>

        <!-- Right Column -->
        <div class="form-column">
          <!-- Proposal Title -->
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>d. Proposal Title/No.</mat-label>
            <input matInput 
                   formControlName="proposalTitle"
                   placeholder="Enter proposal title/number">
            <mat-error *ngIf="generalInfoForm.get('proposalTitle')?.errors?.['required']">
              Proposal title/number is required
            </mat-error>
          </mat-form-field>

          <!-- Response Date -->
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>e. Required Response Date</mat-label>
            <input matInput 
                   [matDatepicker]="picker"
                   formControlName="responseDate"
                   placeholder="MM/DD/YYYY">
            <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
            <mat-datepicker #picker></mat-datepicker>
            <mat-error *ngIf="generalInfoForm.get('responseDate')?.errors?.['required']">
              Response date is required
            </mat-error>
          </mat-form-field>

          <!-- Contractor Information -->
          <div class="contact-group" formGroupName="contractor">
            <h3>f. Contractor</h3>
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Company Name</mat-label>
              <input matInput 
                     formControlName="companyName"
                     placeholder="Enter company name">
              <mat-error *ngIf="generalInfoForm.get('contractor.companyName')?.errors?.['required']">
                Company name is required
              </mat-error>
            </mat-form-field>

            <mat-form-field appearance="outline" class="full-width">
              <mat-label>City</mat-label>
              <input matInput 
                     formControlName="city"
                     placeholder="Enter city">
              <mat-error *ngIf="generalInfoForm.get('contractor.city')?.errors?.['required']">
                City is required
              </mat-error>
            </mat-form-field>

            <mat-form-field appearance="outline" class="full-width">
              <mat-label>State</mat-label>
              <input matInput 
                     formControlName="state"
                     placeholder="Enter state">
              <mat-error *ngIf="generalInfoForm.get('contractor.state')?.errors?.['required']">
                State is required
              </mat-error>
            </mat-form-field>
          </div>

          <!-- Delivery Period -->
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>g. Delivery/Period of Performance</mat-label>
            <input matInput 
                   formControlName="deliveryPeriod"
                   placeholder="Enter delivery/period of performance">
            <mat-error *ngIf="generalInfoForm.get('deliveryPeriod')?.errors?.['required']">
              Delivery/Period of Performance is required
            </mat-error>
          </mat-form-field>
        </div>

        <!-- Add loading state handling -->
        <div *ngIf="isLoading" class="loading-overlay">
            <mat-spinner diameter="30"></mat-spinner>
          </div>

          <!-- Add error summary -->
          <div *ngIf="showErrors" class="error-summary">
            <mat-error>
              Please correct the following errors:
              <ul>
                <li *ngFor="let error of formErrors">{{ error }}</li>
              </ul>
            </mat-error>
          </div>
      </form>
    </mat-card-content>
  </mat-card>